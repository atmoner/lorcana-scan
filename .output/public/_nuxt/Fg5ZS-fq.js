import{d as Z,r as $,o as N,y,z as k,A as r,C as ee,F as S,E as V,G as c,H as te,I as se,J as re,K as ne,L as oe,B as m,M as W,N as K,O as q,D as ie,T as ae}from"./D4eHz3Al.js";var A;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(A||(A={}));class F extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const le=s=>{var e,t;return s?.androidBridge?"android":!((t=(e=s?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},ce=s=>{const e=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},n=t.Plugins=t.Plugins||{},a=()=>e!==null?e.name:le(s),o=()=>a()!=="web",h=u=>{const f=C.get(u);return!!(f?.platforms.has(a())||w(u))},w=u=>{var f;return(f=t.PluginHeaders)===null||f===void 0?void 0:f.find(g=>g.name===u)},b=u=>s.console.error(u),C=new Map,j=(u,f={})=>{const g=C.get(u);if(g)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),g.proxy;const i=a(),d=w(u);let x;const U=async()=>(!x&&i in f?x=typeof f[i]=="function"?x=await f[i]():x=f[i]:e!==null&&!x&&"web"in f&&(x=typeof f.web=="function"?x=await f.web():x=f.web),x),l=(p,v)=>{var L,P;if(d){const E=d?.methods.find(_=>v===_.name);if(E)return E.rtype==="promise"?_=>t.nativePromise(u,v.toString(),_):(_,R)=>t.nativeCallback(u,v.toString(),_,R);if(p)return(L=p[v])===null||L===void 0?void 0:L.bind(p)}else{if(p)return(P=p[v])===null||P===void 0?void 0:P.bind(p);throw new F(`"${u}" plugin is not implemented on ${i}`,A.Unimplemented)}},O=p=>{let v;const L=(...P)=>{const E=U().then(_=>{const R=l(_,p);if(R){const I=R(...P);return v=I?.remove,I}else throw new F(`"${u}.${p}()" is not implemented on ${i}`,A.Unimplemented)});return p==="addListener"&&(E.remove=async()=>v()),E};return L.toString=()=>`${p.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:p,writable:!1,configurable:!1}),L},B=O("addListener"),T=O("removeListener"),Y=(p,v)=>{const L=B({eventName:p},v),P=async()=>{const _=await L;T({eventName:p,callbackId:_},v)},E=new Promise(_=>L.then(()=>_({remove:P})));return E.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},E},D=new Proxy({},{get(p,v){switch(v){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?Y:B;case"removeListener":return T;default:return O(v)}}});return n[u]=D,C.set(u,{name:u,proxy:D,platforms:new Set([...Object.keys(f),...d?[i]:[]])}),D};return t.convertFileSrc||(t.convertFileSrc=u=>u),t.getPlatform=a,t.handleError=b,t.isNativePlatform=o,t.isPluginAvailable=h,t.registerPlugin=j,t.Exception=F,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},de=s=>s.Capacitor=ce(s),M=de(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),H=M.registerPlugin;class z{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(e);const h=async()=>this.removeListener(e,t);return Promise.resolve({remove:h})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const a=this.listeners[e];if(!a){if(n){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}a.forEach(o=>o(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new M.Exception(e,A.Unimplemented)}unavailable(e="not available"){return new M.Exception(e,A.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const a=n.indexOf(t);this.listeners[e].splice(a,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(n=>{this.notifyListeners(e,n)}))}}const G=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),J=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ue extends z{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[a,o]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");a=J(a).trim(),o=J(o).trim(),t[a]=o}),t}async setCookie(e){try{const t=G(e.key),n=G(e.value),a=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),h=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${a}; path=${o}; ${h};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}H("CapacitorCookies",{web:()=>new ue});const he=async s=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const a=n.result;e(a.indexOf(",")>=0?a.split(",")[1]:a)},n.onerror=a=>t(a),n.readAsDataURL(s)}),we=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(a=>a.toLocaleLowerCase()).reduce((a,o,h)=>(a[o]=s[e[h]],a),{})},fe=(s,e=!0)=>s?Object.entries(s).reduce((n,a)=>{const[o,h]=a;let w,b;return Array.isArray(h)?(b="",h.forEach(C=>{w=e?encodeURIComponent(C):C,b+=`${o}=${w}&`}),b.slice(0,-1)):(w=e?encodeURIComponent(h):h,b=`${o}=${w}`),`${n}&${b}`},"").substr(1):null,ge=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),a=we(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(a.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[h,w]of Object.entries(s.data||{}))o.set(h,w);t.body=o.toString()}else if(a.includes("multipart/form-data")||s.data instanceof FormData){const o=new FormData;if(s.data instanceof FormData)s.data.forEach((w,b)=>{o.append(b,w)});else for(const w of Object.keys(s.data))o.append(w,s.data[w]);t.body=o;const h=new Headers(t.headers);h.delete("content-type"),t.headers=h}else(a.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class me extends z{async request(e){const t=ge(e,e.webFetchExtra),n=fe(e.params,e.shouldEncodeUrlParams),a=n?`${e.url}?${n}`:e.url,o=await fetch(a,t),h=o.headers.get("content-type")||"";let{responseType:w="text"}=o.ok?e:{};h.includes("application/json")&&(w="json");let b,C;switch(w){case"arraybuffer":case"blob":C=await o.blob(),b=await he(C);break;case"json":b=await o.json();break;default:b=await o.text()}const j={};return o.headers.forEach((u,f)=>{j[f]=u}),{data:b,headers:j,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}H("CapacitorHttp",{web:()=>new me});var Q;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(Q||(Q={}));var X;(function(s){s.StatusBar="StatusBar",s.NavigationBar="NavigationBar"})(X||(X={}));class be extends z{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}H("SystemBars",{web:()=>new be});const pe={class:"min-h-screen flex flex-col safe-area-container"},xe={class:"bg-black/30 backdrop-blur-sm border-b border-white/10 px-4 py-3 pt-safe"},ve={class:"flex items-center justify-between"},ye={class:"flex-1 flex flex-col p-4"},ke={key:0,class:"flex-1 flex flex-col items-center justify-center gap-6"},Ce={class:"w-full max-w-sm"},_e={class:"relative"},Le=["disabled"],Pe={key:0,class:"h-5 w-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Ee={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},je={key:0,class:"w-full max-w-sm max-h-80 overflow-y-auto bg-black/30 rounded-xl border border-white/10"},$e=["onClick"],Ae=["src","alt"],Ue={class:"flex-1 min-w-0"},Oe={class:"font-medium truncate"},Se={class:"text-sm text-white/60 truncate"},Be={key:1,class:"flex-1 flex flex-col gap-4 animate-fade-in"},Te={class:"flex justify-center"},Re={class:"relative"},Ie=["src","alt"],Me={class:"bg-black/30 backdrop-blur-sm rounded-2xl p-4 border border-white/10"},De={class:"flex items-start justify-between mb-3"},Fe={class:"text-xl font-bold text-white"},He={class:"text-white/60 text-sm"},ze={class:"grid grid-cols-2 gap-3 mb-4"},Ve={class:"bg-white/5 rounded-lg p-3"},We={class:"text-white font-medium"},Ke={class:"bg-white/5 rounded-lg p-3"},qe={class:"text-white font-medium capitalize"},Ge={class:"bg-white/5 rounded-lg p-3"},Je={class:"text-white font-medium"},Qe={class:"bg-white/5 rounded-lg p-3"},Xe={class:"text-white font-medium"},Ye={key:0,class:"mb-4"},Ze={class:"text-lorcana-amber font-semibold text-sm"},Ne={class:"text-white/80 text-sm"},et={key:1,class:"border-t border-white/10 pt-3"},tt={class:"text-white/50 italic text-sm"},st={class:"flex items-center justify-between mt-4 pt-3 border-t border-white/10"},rt={class:"text-white/50 text-sm"},nt={class:"text-white/50 text-sm"},ot={key:0,class:"fixed bottom-4 left-4 right-4 bg-red-500/90 backdrop-blur-sm text-white px-4 py-3 rounded-xl flex items-center gap-3"},it={class:"flex-1 text-sm"},lt=Z({__name:"index",setup(s){const e=$(""),t=$([]),n=$(null),a=$(!1),o=$(""),h=$(!1);N(()=>{h.value=M.isNativePlatform()});async function w(){if(e.value.trim()){a.value=!0,o.value="";try{const g=await b(e.value);t.value=g,g.length===0&&(o.value="Aucune carte trouvée pour cette recherche.")}catch(g){console.error("Search error:",g),o.value=g.message||"Erreur lors de la recherche."}finally{a.value=!1}}}async function b(g){try{const i=h.value?`https://lorca-lab.com/api/cards/search?q=${encodeURIComponent(g)}`:`/api/cards/search?q=${encodeURIComponent(g)}`,d=await fetch(i);if(!d.ok)throw new Error("Erreur lors de la recherche");const x=await d.json(),U=g.toLowerCase().trim();return(x.cards||x||[]).filter(l=>{const O=(l.name||l.title||"").toLowerCase(),B=(l.subtitle||l.version||"").toLowerCase(),T=(l.id||l._id||"").toString().toLowerCase();return O.includes(U)||B.includes(U)||T.includes(U)}).map(l=>({id:l.id||l._id,name:l.name||l.title,subtitle:l.subtitle||l.version,type:l.type||"Personnage",ink:l.ink||l.color||"amber",cost:l.cost||l.inkCost||0,strength:l.strength||l.attack,willpower:l.willpower||l.defense,rarity:l.rarity||"Commune",set:l.set||l.setName||"The First Chapter",number:l.number||l.cardNumber||"001",totalInSet:l.totalInSet||"204",image:l.image||l.imageUrl||l.images?.full||`https://lorca-lab.com/cards/${l.id}.jpg`,abilities:l.abilities||[],flavorText:l.flavorText||l.flavor,fullIdentifier:l.fullIdentifier||`${l.set}-${l.number}`}))}catch(i){throw console.error("API Error:",i),i}}function C(g){n.value=g,t.value=[],e.value=""}function j(){n.value=null,t.value=[],e.value=""}function u(g){return{amber:"bg-lorcana-amber",amethyst:"bg-lorcana-amethyst",emerald:"bg-lorcana-emerald",ruby:"bg-lorcana-ruby",sapphire:"bg-lorcana-sapphire",steel:"bg-lorcana-steel"}[g.toLowerCase()]||"bg-gray-500"}function f(g){return{Commune:"bg-gray-500/50 text-gray-200",Common:"bg-gray-500/50 text-gray-200",Inhabituelle:"bg-green-500/50 text-green-200",Uncommon:"bg-green-500/50 text-green-200",Rare:"bg-blue-500/50 text-blue-200","Super Rare":"bg-purple-500/50 text-purple-200",Légendaire:"bg-yellow-500/50 text-yellow-200",Legendary:"bg-yellow-500/50 text-yellow-200",Enchanted:"bg-gradient-to-r from-pink-500/50 to-purple-500/50 text-pink-200"}[g]||"bg-gray-500/50 text-gray-200"}return(g,i)=>(k(),y("div",pe,[r("header",xe,[r("div",ve,[i[3]||(i[3]=r("h1",{class:"text-xl font-bold text-white flex items-center gap-2"},[r("span",{class:"text-2xl"},"✨"),V(" Lorcana Search ")],-1)),c(n)?(k(),y("button",{key:0,onClick:j,class:"text-white/70 hover:text-white transition-colors"},[...i[2]||(i[2]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):S("",!0)])]),r("main",ye,[c(n)?(k(),y("div",Be,[r("div",Te,[r("div",Re,[r("img",{src:c(n).image,alt:c(n).name,class:"w-64 rounded-xl shadow-2xl shadow-black/50"},null,8,Ie),r("div",{class:q(["absolute -top-2 -right-2 w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold",u(c(n).ink)])},m(c(n).cost),3)])]),r("div",Me,[r("div",De,[r("div",null,[r("h2",Fe,m(c(n).name),1),r("p",He,m(c(n).subtitle),1)]),r("span",{class:q(["px-3 py-1 rounded-full text-xs font-semibold",f(c(n).rarity)])},m(c(n).rarity),3)]),r("div",ze,[r("div",Ve,[i[8]||(i[8]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide"},"Type",-1)),r("p",We,m(c(n).type),1)]),r("div",Ke,[i[9]||(i[9]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide"},"Encre",-1)),r("p",qe,m(c(n).ink),1)]),r("div",Ge,[i[10]||(i[10]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide"},"Force",-1)),r("p",Je,m(c(n).strength||"-"),1)]),r("div",Qe,[i[11]||(i[11]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide"}," Volonté ",-1)),r("p",Xe,m(c(n).willpower||"-"),1)])]),c(n).abilities?.length?(k(),y("div",Ye,[i[12]||(i[12]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide mb-2"}," Capacités ",-1)),(k(!0),y(W,null,K(c(n).abilities,(d,x)=>(k(),y("div",{key:x,class:"bg-white/5 rounded-lg p-3 mb-2"},[r("p",Ze,m(d.name),1),r("p",Ne,m(d.effect),1)]))),128))])):S("",!0),c(n).flavorText?(k(),y("div",et,[r("p",tt,' "'+m(c(n).flavorText)+'" ',1)])):S("",!0),r("div",st,[r("span",rt,m(c(n).set),1),r("span",nt,m(c(n).number)+"/"+m(c(n).totalInSet),1)])]),r("button",{onClick:j,class:"w-full py-4 bg-gradient-to-r from-lorcana-amethyst to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-lorcana-amethyst/30 transition-all"}," Rechercher une autre carte ")])):(k(),y("div",ke,[i[7]||(i[7]=te('<div class="flex flex-col items-center gap-3"><div class="w-24 h-24 rounded-full bg-gradient-to-br from-lorcana-amber to-orange-500 flex items-center justify-center shadow-lg shadow-lorcana-amber/30"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><p class="text-white/70 text-center text-sm px-4"> Recherchez une carte par son nom ou son ID </p></div>',1)),r("div",Ce,[r("div",_e,[se(r("input",{"onUpdate:modelValue":i[0]||(i[0]=d=>oe(e)?e.value=d:null),type:"text",placeholder:"Nom de la carte ou ID...",class:"w-full px-4 py-3 pl-10 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-lorcana-amber focus:ring-1 focus:ring-lorcana-amber transition-all",onKeyup:ne(w,["enter"])},null,544),[[re,c(e)]]),i[4]||(i[4]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),r("button",{onClick:w,disabled:!c(e)||c(a),class:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-lorcana-amber to-orange-500 text-white font-semibold rounded-xl shadow-lg shadow-lorcana-amber/30 hover:shadow-lorcana-amber/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[c(a)?(k(),y("svg",Pe,[...i[5]||(i[5]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(k(),y("svg",Ee,[...i[6]||(i[6]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])])),V(" "+m(c(a)?"Recherche...":"Rechercher"),1)],8,Le),c(t).length>0?(k(),y("div",je,[(k(!0),y(W,null,K(c(t),d=>(k(),y("button",{key:d.id,onClick:x=>C(d),class:"w-full px-3 py-2 text-left text-white hover:bg-white/10 transition-colors border-b border-white/10 last:border-b-0 flex items-center gap-3"},[r("img",{src:d.image,alt:d.name,class:"w-12 h-16 object-cover rounded-md flex-shrink-0"},null,8,Ae),r("div",Ue,[r("div",Oe,m(d.name),1),r("div",Se,m(d.set)+" - "+m(d.rarity)+" - "+m(d.fullIdentifier),1)])],8,$e))),128))])):S("",!0)]))]),ee(ae,{name:"slide-up"},{default:ie(()=>[c(o)?(k(),y("div",ot,[i[14]||(i[14]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),r("span",it,m(c(o)),1),r("button",{onClick:i[1]||(i[1]=d=>o.value=""),class:"text-white/80 hover:text-white"},[...i[13]||(i[13]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):S("",!0)]),_:1})]))}});export{lt as default};
