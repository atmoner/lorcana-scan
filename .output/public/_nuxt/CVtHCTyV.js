import{d as Z,r as U,o as N,y,z as k,A as r,C as ee,F as S,E as V,G as c,H as te,I as se,J as re,K as ne,L as oe,B as m,M as q,N as W,O as K,D as ie,T as ae}from"./BaB1L95q.js";var O;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(O||(O={}));class z extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const le=s=>{var e,t;return s?.androidBridge?"android":!((t=(e=s?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},ce=s=>{const e=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},n=t.Plugins=t.Plugins||{},l=()=>e!==null?e.name:le(s),o=()=>l()!=="web",h=u=>{const p=C.get(u);return!!(p?.platforms.has(l())||f(u))},f=u=>{var p;return(p=t.PluginHeaders)===null||p===void 0?void 0:p.find(w=>w.name===u)},g=u=>s.console.error(u),C=new Map,$=(u,p={})=>{const w=C.get(u);if(w)return console.warn(`Capacitor plugin "${u}" already registered. Cannot register plugins twice.`),w.proxy;const i=l(),d=f(u);let b;const a=async()=>(!b&&i in p?b=typeof p[i]=="function"?b=await p[i]():b=p[i]:e!==null&&!b&&"web"in p&&(b=typeof p.web=="function"?b=await p.web():b=p.web),b),_=(v,x)=>{var E,P;if(d){const j=d?.methods.find(L=>x===L.name);if(j)return j.rtype==="promise"?L=>t.nativePromise(u,x.toString(),L):(L,R)=>t.nativeCallback(u,x.toString(),L,R);if(v)return(E=v[x])===null||E===void 0?void 0:E.bind(v)}else{if(v)return(P=v[x])===null||P===void 0?void 0:P.bind(v);throw new z(`"${u}" plugin is not implemented on ${i}`,O.Unimplemented)}},A=v=>{let x;const E=(...P)=>{const j=a().then(L=>{const R=_(L,v);if(R){const B=R(...P);return x=B?.remove,B}else throw new z(`"${u}.${v}()" is not implemented on ${i}`,O.Unimplemented)});return v==="addListener"&&(j.remove=async()=>x()),j};return E.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(E,"name",{value:v,writable:!1,configurable:!1}),E},T=A("addListener"),F=A("removeListener"),Y=(v,x)=>{const E=T({eventName:v},x),P=async()=>{const L=await E;F({eventName:v,callbackId:L},x)},j=new Promise(L=>E.then(()=>L({remove:P})));return j.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await P()},j},M=new Proxy({},{get(v,x){switch(x){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return d?Y:T;case"removeListener":return F;default:return A(x)}}});return n[u]=M,C.set(u,{name:u,proxy:M,platforms:new Set([...Object.keys(p),...d?[i]:[]])}),M};return t.convertFileSrc||(t.convertFileSrc=u=>u),t.getPlatform=l,t.handleError=g,t.isNativePlatform=o,t.isPluginAvailable=h,t.registerPlugin=$,t.Exception=z,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},de=s=>s.Capacitor=ce(s),I=de(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),D=I.registerPlugin;class H{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),n&&this.sendRetainedArgumentsForEvent(e);const h=async()=>this.removeListener(e,t);return Promise.resolve({remove:h})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const l=this.listeners[e];if(!l){if(n){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}l.forEach(o=>o(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new I.Exception(e,O.Unimplemented)}unavailable(e="not available"){return new I.Exception(e,O.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const l=n.indexOf(t);this.listeners[e].splice(l,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(n=>{this.notifyListeners(e,n)}))}}const G=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),J=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ue extends H{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[l,o]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");l=J(l).trim(),o=J(o).trim(),t[l]=o}),t}async setCookie(e){try{const t=G(e.key),n=G(e.value),l=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),h=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${l}; path=${o}; ${h};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}D("CapacitorCookies",{web:()=>new ue});const he=async s=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const l=n.result;e(l.indexOf(",")>=0?l.split(",")[1]:l)},n.onerror=l=>t(l),n.readAsDataURL(s)}),we=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(l=>l.toLocaleLowerCase()).reduce((l,o,h)=>(l[o]=s[e[h]],l),{})},fe=(s,e=!0)=>s?Object.entries(s).reduce((n,l)=>{const[o,h]=l;let f,g;return Array.isArray(h)?(g="",h.forEach(C=>{f=e?encodeURIComponent(C):C,g+=`${o}=${f}&`}),g.slice(0,-1)):(f=e?encodeURIComponent(h):h,g=`${o}=${f}`),`${n}&${g}`},"").substr(1):null,pe=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),l=we(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(l.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[h,f]of Object.entries(s.data||{}))o.set(h,f);t.body=o.toString()}else if(l.includes("multipart/form-data")||s.data instanceof FormData){const o=new FormData;if(s.data instanceof FormData)s.data.forEach((f,g)=>{o.append(g,f)});else for(const f of Object.keys(s.data))o.append(f,s.data[f]);t.body=o;const h=new Headers(t.headers);h.delete("content-type"),t.headers=h}else(l.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class me extends H{async request(e){const t=pe(e,e.webFetchExtra),n=fe(e.params,e.shouldEncodeUrlParams),l=n?`${e.url}?${n}`:e.url,o=await fetch(l,t),h=o.headers.get("content-type")||"";let{responseType:f="text"}=o.ok?e:{};h.includes("application/json")&&(f="json");let g,C;switch(f){case"arraybuffer":case"blob":C=await o.blob(),g=await he(C);break;case"json":g=await o.json();break;default:g=await o.text()}const $={};return o.headers.forEach((u,p)=>{$[p]=u}),{data:g,headers:$,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}const ge=D("CapacitorHttp",{web:()=>new me});var Q;(function(s){s.Dark="DARK",s.Light="LIGHT",s.Default="DEFAULT"})(Q||(Q={}));var X;(function(s){s.StatusBar="StatusBar",s.NavigationBar="NavigationBar"})(X||(X={}));class be extends H{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}D("SystemBars",{web:()=>new be});const ve={class:"min-h-screen flex flex-col safe-area-container"},xe={class:"bg-black/30 backdrop-blur-sm border-b border-white/10 px-4 py-3 pt-safe"},ye={class:"flex items-center justify-between"},ke={class:"flex-1 flex flex-col p-4"},Ce={key:0,class:"flex-1 flex flex-col items-center justify-center gap-6"},_e={class:"w-full max-w-sm"},Le={class:"relative"},Ee=["disabled"],Pe={key:0,class:"h-5 w-5 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},je={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},$e={key:0,class:"w-full max-w-sm max-h-80 overflow-y-auto bg-black/30 rounded-xl border border-white/10"},Ae=["onClick"],Ue=["src","alt"],Oe={class:"flex-1 min-w-0"},Se={class:"font-medium truncate"},Te={class:"text-sm text-white/60 truncate"},Re={key:1,class:"flex-1 flex flex-col gap-4 animate-fade-in"},Be={class:"flex justify-center"},Ie={class:"relative"},Me=["src","alt"],ze={class:"bg-black/30 backdrop-blur-sm rounded-2xl p-4 border border-white/10"},De={class:"flex items-start justify-between mb-3"},He={class:"text-xl font-bold text-white"},Fe={class:"text-white/60 text-sm"},Ve={class:"grid grid-cols-2 gap-3 mb-4"},qe={class:"bg-white/5 rounded-lg p-3"},We={class:"text-white font-medium"},Ke={class:"bg-white/5 rounded-lg p-3"},Ge={class:"text-white font-medium capitalize"},Je={class:"bg-white/5 rounded-lg p-3"},Qe={class:"text-white font-medium"},Xe={class:"bg-white/5 rounded-lg p-3"},Ye={class:"text-white font-medium"},Ze={key:0,class:"mb-4"},Ne={class:"text-lorcana-amber font-semibold text-sm"},et={class:"text-white/80 text-sm"},tt={key:1,class:"border-t border-white/10 pt-3"},st={class:"text-white/50 italic text-sm"},rt={class:"flex items-center justify-between mt-4 pt-3 border-t border-white/10"},nt={class:"text-white/50 text-sm"},ot={class:"text-white/50 text-sm"},it={key:0,class:"fixed bottom-4 left-4 right-4 bg-red-500/90 backdrop-blur-sm text-white px-4 py-3 rounded-xl flex items-center gap-3"},at={class:"flex-1 text-sm"},ct=Z({__name:"index",setup(s){const e=U(""),t=U([]),n=U(null),l=U(!1),o=U(""),h=U(!1);N(()=>{h.value=I.isNativePlatform()});async function f(){if(e.value.trim()){l.value=!0,o.value="";try{const w=await g(e.value);t.value=w,w.length===0&&(o.value="Aucune carte trouvée pour cette recherche.")}catch(w){console.error("Search error:",w),o.value=w.message||"Erreur lors de la recherche."}finally{l.value=!1}}}async function g(w){try{const i=`https://lorca-lab.com/api/cards/search?q=${encodeURIComponent(w)}`;let d;if(h.value)try{d=(await ge.get({url:i,headers:{"Content-Type":"application/json"}})).data}catch{throw new Error("Impossible de se connecter au serveur. Vérifiez votre connexion internet.")}else{const a=`/api/cards/search?q=${encodeURIComponent(w)}`;let _;try{_=await fetch(a)}catch{throw new Error("Impossible de se connecter au serveur. Vérifiez votre connexion internet.")}if(!_.ok)throw _.status===404?new Error(`Aucune carte trouvée pour "${w}".`):_.status===429?new Error("Trop de requêtes. Veuillez patienter quelques secondes."):_.status>=500?new Error("Le serveur est temporairement indisponible. Réessayez plus tard."):new Error(`Erreur serveur (${_.status}). Réessayez.`);try{d=await _.json()}catch{throw new Error("Erreur lors de la lecture des données.")}}const b=w.toLowerCase().trim();return(d.cards||d||[]).filter(a=>{const _=(a.name||a.title||"").toLowerCase(),A=(a.subtitle||a.version||"").toLowerCase(),T=(a.id||a._id||"").toString().toLowerCase();return _.includes(b)||A.includes(b)||T.includes(b)}).map(a=>({id:a.id||a._id,name:a.name||a.title,subtitle:a.subtitle||a.version,type:a.type||"Personnage",ink:a.ink||a.color||"amber",cost:a.cost||a.inkCost||0,strength:a.strength||a.attack,willpower:a.willpower||a.defense,rarity:a.rarity||"Commune",set:a.set||a.setName||"The First Chapter",number:a.number||a.cardNumber||"001",totalInSet:a.totalInSet||"204",image:a.image||a.imageUrl||a.images?.full||`https://lorca-lab.com/cards/${a.id}.jpg`,abilities:a.abilities||[],flavorText:a.flavorText||a.flavor,fullIdentifier:a.fullIdentifier||`${a.set}-${a.number}`}))}catch(i){throw console.error("API Error:",i),i}}function C(w){n.value=w,t.value=[],e.value=""}function $(){n.value=null,t.value=[],e.value=""}function u(w){return{amber:"bg-lorcana-amber",amethyst:"bg-lorcana-amethyst",emerald:"bg-lorcana-emerald",ruby:"bg-lorcana-ruby",sapphire:"bg-lorcana-sapphire",steel:"bg-lorcana-steel"}[w.toLowerCase()]||"bg-gray-500"}function p(w){return{Commune:"bg-gray-500/50 text-gray-200",Common:"bg-gray-500/50 text-gray-200",Inhabituelle:"bg-green-500/50 text-green-200",Uncommon:"bg-green-500/50 text-green-200",Rare:"bg-blue-500/50 text-blue-200","Super Rare":"bg-purple-500/50 text-purple-200",Légendaire:"bg-yellow-500/50 text-yellow-200",Legendary:"bg-yellow-500/50 text-yellow-200",Enchanted:"bg-gradient-to-r from-pink-500/50 to-purple-500/50 text-pink-200"}[w]||"bg-gray-500/50 text-gray-200"}return(w,i)=>(k(),y("div",ve,[r("header",xe,[r("div",ye,[i[3]||(i[3]=r("h1",{class:"text-xl font-bold text-white flex items-center gap-2"},[r("span",{class:"text-2xl"},"✨"),V(" Lorcana Search ")],-1)),c(n)?(k(),y("button",{key:0,onClick:$,class:"text-white/70 hover:text-white transition-colors"},[...i[2]||(i[2]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):S("",!0)])]),r("main",ke,[c(n)?(k(),y("div",Re,[r("div",Be,[r("div",Ie,[r("img",{src:c(n).image,alt:c(n).name,class:"w-64 rounded-xl shadow-2xl shadow-black/50"},null,8,Me),r("div",{class:K(["absolute -top-2 -right-2 w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold",u(c(n).ink)])},m(c(n).cost),3)])]),r("div",ze,[r("div",De,[r("div",null,[r("h2",He,m(c(n).name),1),r("p",Fe,m(c(n).subtitle),1)]),r("span",{class:K(["px-3 py-1 rounded-full text-xs font-semibold",p(c(n).rarity)])},m(c(n).rarity),3)]),r("div",Ve,[r("div",qe,[i[8]||(i[8]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide"},"Type",-1)),r("p",We,m(c(n).type),1)]),r("div",Ke,[i[9]||(i[9]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide"},"Encre",-1)),r("p",Ge,m(c(n).ink),1)]),r("div",Je,[i[10]||(i[10]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide"},"Force",-1)),r("p",Qe,m(c(n).strength||"-"),1)]),r("div",Xe,[i[11]||(i[11]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide"}," Volonté ",-1)),r("p",Ye,m(c(n).willpower||"-"),1)])]),c(n).abilities?.length?(k(),y("div",Ze,[i[12]||(i[12]=r("p",{class:"text-white/50 text-xs uppercase tracking-wide mb-2"}," Capacités ",-1)),(k(!0),y(q,null,W(c(n).abilities,(d,b)=>(k(),y("div",{key:b,class:"bg-white/5 rounded-lg p-3 mb-2"},[r("p",Ne,m(d.name),1),r("p",et,m(d.effect),1)]))),128))])):S("",!0),c(n).flavorText?(k(),y("div",tt,[r("p",st,' "'+m(c(n).flavorText)+'" ',1)])):S("",!0),r("div",rt,[r("span",nt,m(c(n).set),1),r("span",ot,m(c(n).number)+"/"+m(c(n).totalInSet),1)])]),r("button",{onClick:$,class:"w-full py-4 bg-gradient-to-r from-lorcana-amethyst to-purple-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-lorcana-amethyst/30 transition-all"}," Rechercher une autre carte ")])):(k(),y("div",Ce,[i[7]||(i[7]=te('<div class="flex flex-col items-center gap-3"><div class="w-24 h-24 rounded-full bg-gradient-to-br from-lorcana-amber to-orange-500 flex items-center justify-center shadow-lg shadow-lorcana-amber/30"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><p class="text-white/70 text-center text-sm px-4"> Recherchez une carte par son nom ou son ID </p></div>',1)),r("div",_e,[r("div",Le,[se(r("input",{"onUpdate:modelValue":i[0]||(i[0]=d=>oe(e)?e.value=d:null),type:"text",placeholder:"Nom de la carte ou ID...",class:"w-full px-4 py-3 pl-10 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:border-lorcana-amber focus:ring-1 focus:ring-lorcana-amber transition-all",onKeyup:ne(f,["enter"])},null,544),[[re,c(e)]]),i[4]||(i[4]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-white/50",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),r("button",{onClick:f,disabled:!c(e)||c(l),class:"flex items-center gap-2 px-8 py-3 bg-gradient-to-r from-lorcana-amber to-orange-500 text-white font-semibold rounded-xl shadow-lg shadow-lorcana-amber/30 hover:shadow-lorcana-amber/50 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[c(l)?(k(),y("svg",Pe,[...i[5]||(i[5]=[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(k(),y("svg",je,[...i[6]||(i[6]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"},null,-1)])])),V(" "+m(c(l)?"Recherche...":"Rechercher"),1)],8,Ee),c(t).length>0?(k(),y("div",$e,[(k(!0),y(q,null,W(c(t),d=>(k(),y("button",{key:d.id,onClick:b=>C(d),class:"w-full px-3 py-2 text-left text-white hover:bg-white/10 transition-colors border-b border-white/10 last:border-b-0 flex items-center gap-3"},[r("img",{src:d.image,alt:d.name,class:"w-12 h-16 object-cover rounded-md flex-shrink-0"},null,8,Ue),r("div",Oe,[r("div",Se,m(d.name),1),r("div",Te,m(d.set)+" - "+m(d.rarity)+" - "+m(d.fullIdentifier),1)])],8,Ae))),128))])):S("",!0)]))]),ee(ae,{name:"slide-up"},{default:ie(()=>[c(o)?(k(),y("div",it,[i[14]||(i[14]=r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),r("span",at,m(c(o)),1),r("button",{onClick:i[1]||(i[1]=d=>o.value=""),class:"text-white/80 hover:text-white"},[...i[13]||(i[13]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):S("",!0)]),_:1})]))}});export{ct as default};
